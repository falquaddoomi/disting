# change this to the parent dir that contains both the virtualenv and checked out code
setenv BASEDIR ~/projects

# change this to where you've checked out the code
setenv HOMEDIR $BASEDIR/disting

# change this to the full path to 'activate', usually inside bin in
# the virtualenv dir (it'll be called 'activate.bat' in Scripts on Windows)
setenv VENV_ACTIVATE $BASEDIR/virtualenvs/disting_env/bin/activate

# --- the rest of this should just work without modification --

chdir $HOMEDIR

screen -t server
stuff "source $VENV_ACTIVATE\012"
stuff "./manage.py runserver --insecure 0.0.0.0:5580\012"

screen -t processor 
stuff "source $VENV_ACTIVATE\012"
stuff "./manage.py processor\012"

screen -t workers
stuff "source $VENV_ACTIVATE\012"
stuff "./manage.py celery worker -c 3 --autoreload\012"

screen -t shell
stuff "source $VENV_ACTIVATE\012\012"
